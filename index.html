<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="https://cdn.mxpnl.com/libs/mixpanel-platform/css/reset.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.mxpnl.com/libs/mixpanel-platform/build/mixpanel-platform.v0.latest.min.css">
    <script src="https://cdn.mxpnl.com/libs/mixpanel-platform/build/mixpanel-platform.v0.latest.min.js"></script>
  </head>
  <body class="mixpanel-platform-body">

    <script>
      var query = "function main(){return Events({from_date: '2016-02-12', to_date: '2016-02-15'}).map(function (events){var firstEventTime = new Date(events.time).toJSON().slice(0,10); return{'country': events.properties.mp_country_code,'firstEvent': firstEventTime}}).groupBy([function (country){var country = country.country; return country;}], mixpanel.reducer.count()).reduce(mixpanel.reducer.top(25))};"

      console.log(query)
      
      MP.api.custom_query("function main(){return Events({from_date: '2016-02-12', to_date: '2016-02-15'}).map(function (events){var firstEventTime = new Date(events.time).toJSON().slice(0,10); return{'country': events.properties.mp_country_code,'firstEvent': firstEventTime}}).groupBy([function (country){var country = country.country; return country;}], mixpanel.reducer.count()).reduce(mixpanel.reducer.top(25))};").done(function(results){
        console.log(results);
      });

    </script>
  </body>
</html>
